<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700,900" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Check Out</title>
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700&display=swap" rel="stylesheet" />
  <!-- Stylesheet -->
  <link rel="stylesheet" href="checkOut.css">
</head>
<body>
<header>
  <nav>
    <a href="#home" id="logo"> <img src="logo.png"></a>
    <i class="fas fa-bars" id="ham-menu"></i>
    <ul id="nav-bar">
      <li>
        <a href="/">בית</a>
      </li>
      <li>
        <a href="aboutus">קצת עלינו</a>
      </li>
      <li>
        <a href="#collection">המוצרים שלנו</a>
        <div class="sub-menu-1">
          <ul>
            <li><a href="couch">ספות</a></li>
            <li><a href="armchairs">כסאות בר</a></li>
            <li><a href="table">שולחנות</a></li>
            <li><a href="chairs">כסאות</a></li>
            <li><a href="bed">מיטות</a></li>
         
            

        </ul>
        </div> 
    </li>
    <li>
      <a href="#decor">מוצרים נלווים</a>
       <div class="sub-menu-1">
        <ul>
            <li><a href="rug">מזרונים</a></li>
            <li><a href="mirror">חדרי ילדים</a></li>
        </ul>
          </div> 
      </li>
      <li>
        <a href="ContactUs">צור קשר</a>
      </li>
      <li>
        <button class="btn-my-search" onclick="document.getElementById('id01').style.display='flex'" style="width:auto;"><i class="fas fa-search"></i></button>
      </li>
      <li>
        <a href="/Mybag" class="btn-Shopping-Cart"><i class="fas fa-shopping-cart"></i></a>
      </li>
      <li>
        <a href="/myAccount" class="btn-my-account"> <i class="fas fa-user"></i> </a>
      </li>
    </ul>
  </nav>
</header>

<h2>לתשלום</h2>

<div class="row">
  <div class="col-75">
    <div class="container1">
      <form action="/buy">
        <div class="row">
          <div class="col-50">
            <h3>Billing Address</h3>
            <label for="fname"><i class="fa fa-user"></i> Full Name</label>
            <input type="text" id="fname" name="firstname" placeholder="John M. Doe">
            <label for="email"><i class="fa fa-envelope"></i> Email</label>
            <input type="text" id="email" name="email" placeholder="john@example.com">
            <label for="adr"><i class="fa fa-address-card-o"></i> Address</label>
            <input type="text" id="adr" name="address" placeholder="542 W. 15th Street">
            <label for="city"><i class="fa fa-institution"></i> City</label>
            <input type="text" id="city" name="city" placeholder="New York">
            <div class="row">
              <div class="col-50">
                <label for="state">State</label>
                <input type="text" id="state" name="state" placeholder="NY">
              </div>
              <div class="col-50">
                <label for="zip">Zip</label>
                <input type="text" id="zip" name="zip" placeholder="10001">
              </div>
            </div>
          </div>
          <div class="col-50">
            <h3>Payment</h3>
            <label for="fname">Accepted Cards</label>
            <div class="icon-container1">
              <i class="fa-brands fa-cc-visa" style="color: #160467;"></i>
              <i class="fa-brands fa-cc-amex" style="color:blue;"></i>
              <i class="fa-brands fa-cc-mastercard" style="color:red;"></i>
              <i class="fa-brands fa-cc-discover" style="color:orange;"></i>
            </div>
            <label for="cname">Name on Card</label>
            <input type="text" id="cname" name="cardname" placeholder="John More Doe">
            <label for="ccnum">Credit card number</label>
            <input type="text" id="ccnum" name="cardnumber" placeholder="1111-2222-3333-4444">
            <label for="expmonth">Exp Month</label>
            <input type="text" id="expmonth" name="expmonth" placeholder="September">
            <div class="row">
              <div class="col-50">
                <label for="expyear">Exp Year</label>
                <input type="text" id="expyear" name="expyear" placeholder="2018">
              </div>
              <div class="col-50">
                <label for="cvv">CVV</label>
                <input type="text" id="cvv" name="cvv" placeholder="352">
              </div>
            </div>
          </div>
        </div>
        <label>
          <input type="checkbox" checked="checked" name="sameadr"> Shipping address same as billing
        </label>
        <input type="submit" value="PAY AND PLACE ORDER " class="btn">
      </form>
    </div>
  </div>
  <!-- <div class="col-25">
    <div class="container1"> -->
      <!-- <h4>Cart <span class="price" style="color:black"><i class="fa fa-shopping-cart"></i> <b><% if (typeof size !== 'undefined' && size) {size}%></b></span></h4>
      <% if (typeof details !== 'undefined' && details) { %>
        <% for(let i = 0; i < details.length; i++) { %>
          <% details[i].forEach(function(item) { %>
            <div class="detailsItems">
              
              <form action="/deleteItemC" method="post">
                <div class="detailsItems">
                 
                  <p><a class="pic"><img src="<%= item.pic %>" alt="Product Image"></a>
                 
                  <a>Name: <%= item.name %></a>
                
                  <span class="price"> Price: <%= item.price %> ₪</span> </p>
                  
                  <input type="hidden" name="name" value="<%= item.name %>">
                  <hr>
     
                  <p>Total <span class="price" style="color:black"><b>₪30</b></span></p>
                    </div>
                
                </div>
              </form>
            </div>
          <% }) %>
        <% } %>
      <% } %> -->
     
    </div>
  </div>
</div>

<div id="id01" class="modal">
  <div class="modal-content" action="">
    <div class="container">
      <div class="clearfix">
        <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">X</button>
        <h1>Search</h1>
        <hr>
        <input type="text" placeholder="Tap to search" name="email" required>
        <br>
        <label for="email"><b>Filter</b></label>
        <br>
        <div class="label-search">
          <label>
            <input type="checkbox" checked="checked" id="sofa" style="margin-bottom:15px" > SOFAS
          </label>
          <label>
            <input type="checkbox" checked="checked" id="armchair" style="margin-bottom:15px"> ARMCHAIRS
          </label>
          <label>
            <input type="checkbox" checked="checked" id="table" style="margin-bottom:15px"> TABLES
          </label>
          <label>
            <input type="checkbox" checked="checked" id="chair" style="margin-bottom:15px"> CHAIRS
          </label>
          <label>
            <input type="checkbox" checked="checked" id="bed" style="margin-bottom:15px"> BEDS
          </label>
          <label>
            <input type="checkbox" checked="checked" name="mirror" style="margin-bottom:15px"> MIRRORS
          </label>
        </div>
        <div class="price-input">
          <div class="field">
            <span>Min</span>
            <input type="number" class="input-min" value="2500">
          </div>
          <div class="separator">-</div>
          <div class="field">
            <span>Max</span>
            <input type="number" class="input-max" value="7500">
          </div>
        </div>
        <div class="slider">
          <div class="progress"></div>
        </div>
        <div class="range-input">
          <input id="min" type="range" class="range-min" min="0" max="10000" value="0" step="100">
          <input id ="max" type="range" class="range-max" min="0" max="10000" value="10000" step="100">
          <button type="submit" class="signupbtn" onclick="objCheck()">Search</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  function objCheck() {
    console.log("1");
    var sofaCheck = document.getElementById('sofa').checked;
    var armCheck = document.getElementById('armchair').checked;
    var tableCheck = document.getElementById('table').checked;
    var chairCheck = document.getElementById('chair').checked;
    var bedCheck = document.getElementById('bed').checked;
    var accsCheck = document.getElementById('accs').checked;
    var min = document.getElementById('min').value;
    var max = document.getElementById('max').value;
    console.log(min, max);
    const dat = {
      sofa: sofaCheck,
      arm: armCheck,
      table: tableCheck,
      chair: chairCheck,
      bed: bedCheck,
      accs: accsCheck,
      min: min,
      max: max
    };
    fetch('/search', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(dat)
    })
    .then(response => response.json())
    .then(infor => {
      window.location.href = 'search';
    });
  }
</script>

<script>
  let hamMenuIcon = document.getElementById("ham-menu");
  let navBar = document.getElementById("nav-bar");
  let navLinks = navBar.querySelectorAll("li");

  hamMenuIcon.addEventListener("click", () => {
    navBar.classList.toggle("active");
    hamMenuIcon.classList.toggle("fa-times");
  });

  navLinks.forEach((navLinks) => {
    navLinks.addEventListener("click", () => {
      navBar.classList.remove("active");
      hamMenuIcon.classList.toggle("fa-times");
    });
  });
</script>

<script>
  // Get the modal
  var modal = document.getElementById('id01');

  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function(event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  };
</script>

<script>
  const rangeInput = document.querySelectorAll(".range-input input");
  const priceInput = document.querySelectorAll(".price-input input");
  const range = document.querySelector(".slider .progress");
  let priceGap = 1000;

  priceInput.forEach((input) => {
    input.addEventListener("input", (e) => {
      let minPrice = parseInt(priceInput[0].value);
      let maxPrice = parseInt(priceInput[1].value);

      if (maxPrice - minPrice >= priceGap && maxPrice <= rangeInput[1].max) {
        if (e.target.className === "input-min") {
          rangeInput[0].value = minPrice;
          range.style.left = (minPrice / rangeInput[0].max) * 100 + "%";
        } else {
          rangeInput[1].value = maxPrice;
          range.style.right = 100 - (maxPrice / rangeInput[1].max) * 100 + "%";
        }
      }
    });
  });

  rangeInput.forEach((input) => {
    input.addEventListener("input", (e) => {
      let minVal = parseInt(rangeInput[0].value);
      let maxVal = parseInt(rangeInput[1].value);

      if (maxVal - minVal < priceGap) {
        if (e.target.className === "range-min") {
          rangeInput[0].value = maxVal - priceGap;
        } else {
          rangeInput[1].value = minVal + priceGap;
        }
      } else {
        priceInput[0].value = minVal;
        priceInput[1].value = maxVal;
        range.style.left = (minVal / rangeInput[0].max) * 100 + "%";
        range.style.right = 100 - (maxVal / rangeInput[1].max) * 100 + "%";
      }
    });
  });
</script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</body>
</html>
